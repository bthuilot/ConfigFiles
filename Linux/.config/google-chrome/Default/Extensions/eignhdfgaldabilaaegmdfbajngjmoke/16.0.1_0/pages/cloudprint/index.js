cjModules.define(function(){"use strict";return function(e,t){function n(e){bmRuntime.openTab(C+"?user="+g.account.authuser+"#jobs/"+e)}function a(e){return cjBasics.ajax(e,{fetchAs:"json",headers:{"X-CloudPrint-Proxy":"Google-JS"}})}function i(e){var t=C+"/jobs?authuser="+g.account.authuser;return e.q&&(t+="&q="+e.q),a(t).then(function(e){return e.jobs})}function r(e){var t=C+"/search?authuser="+g.account.authuser;return e.q&&(t+="&q="+e.q),a(t).then(function(e){return e.printers})}function c(e){var t=new Date(e),n=[t.getFullYear(),t.getMonth(),t.getDate()];return cjBasics.datetime.printLegacyDate(n)}function o(e){var t=cjMaterial.createElement("item");t.addEventListener("click",function(){bmRuntime.openTab(C+"?user="+g.account.authuser+"#printers/"+e.id)});var n={ANDROID_CHROME_SNAPSHOT:"chrome",DRIVE:"drive"},a=cjMaterial.createElement("icon",{serviceName:n[e.type]||"cloudprint"});t.appendChild(a);var i=document.createElement("div");i.className="cj-md-item__body";var r=document.createElement("div");r.className="cj-md-item__header",r.textContent=e.displayName,i.appendChild(r);var c=[];if(e.ownerId===g.account.email&&c.push(bmRuntime.i18n("cj_i18n_00013","owned by me")),"UNKNOWN"!==e.connectionStatus&&c.push(e.connectionStatus),0===c.length){var o=document.createElement("div");o.className="cj-md-secondarytext";var l=c.join(" - "),d=document.createTextNode(l);o.appendChild(d),i.appendChild(o)}return t.appendChild(i),t}function l(){var e=h.pages.printers;e.textContent="",r({q:b}).then(function(t){if(0===t.length){var n=cjMaterial.createElement("emptystate",{color:"#4285f4",label:bmRuntime.i18n("cj_i18n_00372","No printers found"),subLabel:bmRuntime.i18n("cj_i18n_00373","You can add a printer by clicking the red button at the bottom"),iconName:"__mdi:print"});e.appendChild(n)}else{var a=cjMaterial.createElement("list");t.forEach(function(e){var t=o(e);a.appendChild(t)}),e.appendChild(a)}var i=cjMaterial.createElement("fab",{iconName:"__mdi:add",onClick:function(){bmRuntime.openTab("https://support.google.com/cloudprint/answer/1686197?authuser="+g.account.authuser)}});e.appendChild(i),bmRuntime.toggleLoading("off",e)})}function d(e){return E[e]||{name:"__mdi:drive_file",color:"#4285f4"}}function u(e){var t=cjMaterial.createElement("item");t.addEventListener("click",function(){n(e.id)});var a=d(e.contentType);a.withShell=!0;var i=cjMaterial.createElement("icon",a);t.appendChild(i);var r=document.createElement("div");r.className="cj-md-item__body";var o=document.createElement("div");o.className="cj-md-item__header",o.textContent=e.title,r.appendChild(o);var l=document.createElement("div");l.className="cj-md-secondarytext";var u=c(JSON.parse(e.createTime)),m=document.createTextNode(bmRuntime.i18n("cj_i18n_00011","created")+": "+u+" - "+bmRuntime.i18n("cj_i18n_00012","status")+": "+e.status);return l.appendChild(m),r.appendChild(l),t.appendChild(r),t}function m(){bmRuntime.toggleLoading("on",h.pages.jobs),i({q:b}).then(function(e){var t=h.pages.jobs;if(t.textContent="",0===e.length){var n=cjMaterial.createElement("emptystate",{color:"#4285f4",label:bmRuntime.i18n("cj_i18n_00374","No print jobs found"),iconName:"__mdi:print"});t.appendChild(n)}else{var a=cjMaterial.createElement("list");e.forEach(function(e){var t=u(e);a.appendChild(t)}),t.appendChild(a)}bmRuntime.toggleLoading("off",h.pages.jobs)})}function s(){b=f.value,m(),l()}function p(){v={jobs:{label:bmRuntime.i18n("cj_i18n_00052","Print Jobs"),content:function(){return cjMaterial.createElement("container",{scrollable:!0,shadow:!0})},loadOnInit:!0},printers:{label:bmRuntime.i18n("cj_i18n_00053","Printers"),content:function(){return cjMaterial.createElement("container",{scrollable:!0,shadow:!0})},loadOnInit:!0}};var n=bmElements.createElement("pageheader",{color:"#fff",light:!0,pageId:"cloudprint",searchboxProperties:{color:"#4285f4",onSubmit:s,onSubmitAlt:function(e){var t=C+"?user="+g.account.authuser+"#"+j.selected+"?q="+encodeURIComponent(e);bmRuntime.openTab(t)}}});f=n.searchbox,e.appendChild(n),_(f.select);var a=cjMaterial.createElement("appbar",{color:"#fff",light:!0,secondary:!0}),i="jobs";j=cjMaterial.createElement("tabs",{fill:!0,items:v,onChange:function(e){f.value!==b&&s(),h.selected=e},selected:i}),a.appendChild(j),e.appendChild(a),h=bmElements.createElement("multiplecontainer",{items:v,selected:i}),e.appendChild(h),s(),t.setOpenInNewHandler(function(){var e=C+"?user="+g.account.authuser+"#"+j.selected;bmRuntime.openTab(e)})}var h,f,b,v,j,_=t.onPageDisplay,C="https://www.google.com/cloudprint",E={"application/pdf":{name:"__mdi:drive_pdf",color:"#ea4335"},"text/plain":{name:"__mdi:drive_text",color:"#4285f4"}};p()}});