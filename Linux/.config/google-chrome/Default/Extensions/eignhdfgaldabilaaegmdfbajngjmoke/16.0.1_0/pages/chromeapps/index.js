cjModules.define(function(){"use strict";return function(e){function n(e){var n=browser.runtime.getURL("images/defaultIcon.png"),t=n,i=e&&e.icons,a=!1;return i&&(i.forEach(function(e){var n=cjBasics.isRetina?[64,128]:[32,64,128];n.forEach(function(n){a||e.size!==n||(t=e.url,a=!0)})}),a||(t=i[i.length-1].url)),t}function t(e){l.launchApp(e)}function i(){bmRuntime.toggleLoading("on",e),m.textContent="";var i=document.createElement("ul");i.className="bm-ele-shortcutlist",i.addEventListener("click",function(e){e.target.parentNode===i&&t(e.target.dataset.id)}),u.then(function(e){e.forEach(function(e){if(e.enabled&&e.isApp){var t=cjMaterial.createElement("item");t.dataset.id=e.id;var a=cjMaterial.createElement("icon",{url:n(e),size:32});t.appendChild(a);var o=document.createElement("div");o.className="cj-md-item__body",o.textContent=e.shortName||e.name,t.appendChild(o),i.appendChild(t)}})}),m.appendChild(i),bmRuntime.toggleLoading("off",e)}function a(){chrome.permissions.request({permissions:["management"]},function(e){e&&(i(),s.classList.remove("on"))})}function o(){s=bmElements.createElement("fulldialog",{serviceLogo:{labelPrefix:"",label:bmRuntime.i18n("cj_i18n_00078","Chrome Apps")},iconName:"chrome",message:bmRuntime.i18n("cj_i18n_00377","Before you can use this page, you need to give access to list your Chrome Apps"),actionLabel:bmRuntime.i18n("cj_i18n_00224","Give permission"),action:a}),e.appendChild(s)}function c(){chrome.permissions.contains({permissions:["management"]},function(e){e?i():o()})}function r(){bmRuntime.toggleLoading("on",e);var n=bmElements.createElement("pageheader",{pageTitle:bmRuntime.i18n("cj_i18n_00078","Chrome Apps"),pageId:"chromeapps",light:!0});e.appendChild(n),m=cjMaterial.createElement("container",{scrollable:!0,shadow:"onScroll"}),e.appendChild(m),c()}var m,s,l=window.chrome&&window.chrome.management,u=new Promise(function(e){l.getAll(function(n){e(n.sort(function(e,n){return(e.shortName||e.name)>(n.shortName||n.name)?1:-1}))})});r()}});