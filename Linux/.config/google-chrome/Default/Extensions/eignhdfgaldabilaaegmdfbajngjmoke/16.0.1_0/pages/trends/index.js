cjModules.define(function(){"use strict";return function(e,t){function n(){v.textContent="";var e=u.value;if(C=e,e.length>0){var t=w.explore.type.selected;"string"==typeof t&&"google"!==t||(t=null);var n=w.explore.edition?w.explore.edition.selected:"worldwide";"string"==typeof n&&"worldwide"!==n||(n=null);var r=cjBasics.urls.create("https://trends.google.com/trends/fetchComponent",{hl:g.lang,cid:"TIMESERIES_GRAPH_0","export":"5",w:"394",h:"300",gprop:t,q:e,geo:n}),a=bmElements.createElement("iframe",{src:r});v.appendChild(a)}else{var l=cjMaterial.createElement("emptystate",{color:"#4285f4",iconName:"__mdi:search",subLabel:bmRuntime.i18n("cj_i18n_00046","Please enter a search query").toLowerCase()});v.appendChild(l)}}function r(){var e=cjMaterial.createElement("container"),t=cjMaterial.createElement("appbar",{color:"#4285f4",secondary:!0}),r=cjMaterial.createElement("iconbutton",{iconName:"__mdi:menu",onClick:function(){b.open()}});t.appendChild(r);var a=cjMaterial.createElement("title",{label:w.explore.label});return t.appendChild(a),w.explore.type=cjMaterial.createElement("selectbox",{onChange:n,options:[{selected:!0,value:"google",label:bmRuntime.i18n("cj_i18n_00056","Web Search")},{value:"images",label:bmRuntime.i18n("cj_i18n_00057","Image Search")},{value:"news",label:bmRuntime.i18n("cj_i18n_00058","News Search")},{value:"froogle",label:bmRuntime.i18n("cj_i18n_00059","Google Shopping")},{value:"youtube",label:bmRuntime.i18n("cj_i18n_00060","YouTube Search")}]}),t.appendChild(w.explore.type),Promise.all([cjBasics.ajax("pages/trends/explore-editions.json",{fetchAs:"json"}),browserStorage.sync.getItem("prefTrendsExploreEdition")]).then(function(e){w.explore.edition=cjMaterial.createElement("selectbox",{onChange:function(){browserStorage.sync.setItem("prefTrendsExploreEdition",w.explore.edition.selected),n()},options:e[0]}),w.explore.edition.selected=e[1]||"worldwide",t.appendChild(w.explore.edition)}),e.appendChild(t),v=cjMaterial.createElement("container"),e.appendChild(v),e}function a(){E.textContent="";var e=w.hottrendsDetails.trendId,t=x[e],n=cjMaterial.createElement("card",{withPadding:!0}),r=cjMaterial.createElement("icon",{size:100,url:"https:"+t.imgUrl});r.dataset.imgSource=t.imgSource,r.className="image-container",r.addEventListener("click",function(){bmRuntime.openTab(t.imgLinkUrl)}),n.appendChild(r);var a=document.createElement("div");a.className="content-container";var l=cjMaterial.createElement("title",{label:t.title});a.appendChild(l);var i=document.createElement("span");i.className="hotness-level",i.setAttribute("style","background-color: "+t.hotnessColor+"; background-position: "+10*t.hotnessLevel+"px;"),a.appendChild(i);var o=document.createElement("span");if(o.textContent=t.formattedTraffic+" "+bmRuntime.i18n("cj_i18n_00063","searches"),a.appendChild(o),t.relatedSearchesList.length>0){var d=document.createElement("div");d.className="relative-searches",d.textContent=bmRuntime.i18n("cj_i18n_00062","Related Searches")+":",a.appendChild(d);var c=cjMaterial.createElement("secondarytext",{label:t.relatedSearchesList.join(", ")});a.appendChild(c)}n.appendChild(a),E.appendChild(n);var s=cjMaterial.createElement("subheader",{label:bmRuntime.i18n("cj_i18n_00064","News Articles")});E.appendChild(s),t.newsArticlesList.forEach(function(e){var t=cjMaterial.createElement("card",{withPadding:!0});t.addEventListener("click",function(){bmRuntime.openTab(e.link)});var n=document.createElement("div");n.className="cj-md-title",n.innerHTML=e.title,t.appendChild(n);var r=document.createElement("div");r.className="cj-md-secondarytext",r.innerHTML=e.source,t.appendChild(r);var a=document.createElement("article");a.innerHTML=e.snippet,t.appendChild(a),E.appendChild(t)})}function l(){j.textContent="",bmRuntime.toggleLoading("on",j),browserStorage.sync.getItem("prefTrendsHottrendsEdition").then(function(e){return e||"p1"}).then(function(e){_=e;var t=cjBasics.urls.create("https://trends.google.com/trends/hottrends/hotItems",{ajax:"1",pn:w.hottrends.edition?w.hottrends.edition.selected:_,htv:"l",hl:g.lang});cjBasics.ajax(t,{fetchAs:"json"}).then(function(e){var t=0;x={},e.trendsByDateList.forEach(function(e){var n=cjMaterial.createElement("subheader",{label:e.formattedDate});j.appendChild(n);var r=cjMaterial.createElement("card");e.trendsList.forEach(function(n){var l=document.createElement("div");l.dataset.id=t,l.addEventListener("click",function(){var e=w.hottrendsDetails.trendId,t=JSON.parse(l.dataset.id);m.selected="hottrendsDetails",e!==t&&(w.hottrendsDetails.trendId=t,a())}),n.date=e.date,x[t]=n,t+=1;var i=document.createElement("span");i.className="hotness-level",i.setAttribute("style","background-color: "+n.hotnessColor+"; background-position: "+10*n.hotnessLevel+"px;"),l.appendChild(i);var o=document.createElement("p");o.textContent=n.title,l.appendChild(o),r.appendChild(l)}),j.appendChild(r)}),bmRuntime.toggleLoading("off",j)})})}function i(){var e=cjMaterial.createElement("container",{darker:!0}),t=cjMaterial.createElement("appbar",{color:"#4285f4",secondary:!0}),n=cjMaterial.createElement("iconbutton",{iconName:"__mdi:menu",onClick:function(){b.open()}});t.appendChild(n);var r=cjMaterial.createElement("title",{label:w.hottrends.label});return t.appendChild(r),Promise.all([cjBasics.ajax("pages/trends/hottrends-editions.json",{fetchAs:"json"}),browserStorage.sync.getItem("prefTrendsHottrendsEdition")]).then(function(e){var n=e[0];_=e[1]||"p1",w.hottrends.edition=cjMaterial.createElement("selectbox",{onChange:function(){browserStorage.sync.setItem("prefTrendsHottrendsEdition",w.hottrends.edition.selected),l()},options:n}),w.hottrends.edition.selected=_,t.appendChild(w.hottrends.edition)}),e.appendChild(t),j=cjMaterial.createElement("container",{scrollable:!0,shadow:!0}),bmRuntime.toggleLoading("on",j),e.appendChild(j),e}function o(){var e=cjMaterial.createElement("container",{darker:!0}),t=cjMaterial.createElement("appbar",{color:"#4285f4",secondary:!0}),n=cjMaterial.createElement("iconbutton",{iconName:"__mdi:arrow_back",onClick:function(){m.selected="hottrends"}});t.appendChild(n);var r=cjMaterial.createElement("title",{label:w.hottrendsDetails.label});t.appendChild(r);var l,i=cjMaterial.createElement("iconbutton",{iconName:"__mdi:chevron_left",onClick:function(){var e=w.hottrendsDetails.trendId,t=e-1;t in x&&(w.hottrendsDetails.trendId-=1,a()),l.disabled=t===Object.keys(x).length-1,i.disabled=0===t}});return i.disabled=!0,t.appendChild(i),l=cjMaterial.createElement("iconbutton",{iconName:"__mdi:chevron_right",onClick:function(){var e=w.hottrendsDetails.trendId,t=e+1;t in x&&(w.hottrendsDetails.trendId+=1,a()),l.disabled=t===Object.keys(x).length-1,i.disabled=0===t}}),t.appendChild(l),e.appendChild(t),E=cjMaterial.createElement("container",{scrollable:!0,shadow:!0}),e.appendChild(E),e}function d(){var e=cjMaterial.createElement("drawer",{color:"#4285f4"}),t=bmElements.createElement("servicelogo",{label:bmRuntime.i18n("cj_i18n_00441","Trends"),color:"color"});e.appendChild(t);var r={hottrends:w.hottrends,explore:w.explore,hotvideos:{label:bmRuntime.i18n("cj_i18n_00191","Trending on YouTube"),newTabUrl:"https://trends.google.com/trends/hotvideos",external:!0},topcharts:{label:bmRuntime.i18n("cj_i18n_00192","Top charts"),newTabUrl:"https://trends.google.com/trends/topcharts",external:!0},subscriptions:{label:bmRuntime.i18n("cj_i18n_00193","Subscriptions"),newTabUrl:"https://trends.google.com/trends/subscriptions",external:!0},correlate:{label:bmRuntime.i18n("cj_i18n_00194","Correlate"),newTabUrl:"https://trends.google.com/trends/correlate",external:!0}};return f=bmElements.createElement("drawertabs",{items:r,onChange:function(e){return r[e].external?void bmRuntime.openTab(r[e].newTabUrl):("hottrends"===e&&(u.value="",n()),void(m.selected=e))},selected:"hottrends"}),e.appendChild(f),e}function c(e){var t=e;"string"==typeof t&&""!==t||(t=null);var n=w.explore.type.selected;"string"==typeof n&&"google"!==n||(n=null);var r=w.explore.edition?w.explore.edition.selected:"worldwide";return"string"==typeof r&&"worldwide"!==r||(r=null),cjBasics.urls.create("https://trends.google.com/trends/explore",{q:t,geo:r,gprop:n})}function s(e){if("explore"===e)return c(C);if("hottrends"===e)return cjBasics.urls.create("https://trends.google.com/trends/hottrends",{pn:w.hottrends.edition?w.hottrends.edition.selected:_,hl:g.lang});if("hottrendsDetails"===e){var t=x[w.hottrendsDetails.trendId];return cjBasics.urls.create("https://trends.google.com/trends/hottrends",{pn:w.hottrends.edition?w.hottrends.edition.selected:_,hl:g.lang,std:t.date,stt:t.title},"a="+t.date+"-"+t.title.split(" ").join("+"))}return"https://trends.google.com/trends/"}function p(){w={hottrends:{label:bmRuntime.i18n("cj_i18n_00195","Trending searches"),content:i,afterLoad:l,newTabUrl:"https://trends.google.com/trends/hottrends"},hottrendsDetails:{label:bmRuntime.i18n("cj_i18n_00196","Trend details"),content:o},explore:{label:bmRuntime.i18n("cj_i18n_00061","Explore"),content:r,afterLoad:n,newTabUrl:"https://trends.google.com/trends/explore",divider:!0}},m=bmElements.createElement("multiplecontainer",{items:w,selected:"hottrends"}),b=d(),h=bmElements.createElement("pageheader",{color:"#4285f4",pageId:"trends",searchboxProperties:{label:bmRuntime.i18n("cj_i18n_00197","Explore topics"),onSubmit:function(){m.selected="explore",f.selected="explore",n()},onSubmitAlt:function(e){var t=c(e);bmRuntime.openTab(t)}}}),u=h.searchbox,t.setOpenInNewHandler(function(){var e=s(m.selected);bmRuntime.openTab(e)}),e.appendChild(b),e.appendChild(h),M(u.select),e.appendChild(m)}var m,h,u,b,f,v,j,E,C,_,x,w,M=t.onPageDisplay;p()}});