!function(){"use strict";function e(e){return e.startsWith("/discover")?"discover":"/communities"===e||"/communities/"===e||"/communities/recommended"===e||"/communities/recommended/"===e||"/communities/member"===e||"/communities/member/"===e||"/communities/yours"===e||"/communities/yours/"===e?"communities":"/"===e||"/stream"===e?"stream":"/settings"===e?"settings":e.startsWith("/people")||e.startsWith("/circles")?"people":e.startsWith("/notifications")?"notifications":"back"}function t(e){return e.startsWith("/communities")?"#0f9d58":"#fff"}function i(e,t){parent.postMessage({method:"gplusWebsiteData",key:e,value:t},"*")}function n(e){return e?"A"===e.tagName?e:n(e.parentNode):null}var o,s,r,a="",c=location.href.split("/u/")[1];c&&(a+="/u/"+c.split("/")[0]);var m=location.href.split("/b/")[1];m&&(a+="/b/"+m.split("/")[0]),setInterval(function(){if(location.pathname!==o){o=location.pathname;var n=o.replace(a,""),c=t(n);c!==s&&(s=c,i("color",s));var m=e(n);m!==r&&(r=m,i("view",r))}},100),window.addEventListener("DOMContentLoaded",function(){var e=document.querySelector("head > title"),t=new MutationObserver(function(){i("title",document.title.split(" - ")[0])});t.observe(e,{childList:!0})}),document.addEventListener("mousedown",function(e){var t=n(e.target);t&&t.href.indexOf("bm_")===-1&&(t.href+=location.search)}),window.addEventListener("message",function(e){var t=e.origin,i=t.startsWith("chrome-extension://")||t.startsWith("moz-extension://");if(i){var o=e.data,s=o.requestId,r=o.method,a=o.parameters;if("clickEle"===r){var c=document.querySelector(a.selector),m=n(c);m&&m.href.indexOf("bm_")===-1&&(m.href+=location.search),c.click()}"back"===r&&history.back(),"getUrl"===r&&parent.postMessage({requestId:s,result:location.href},t)}})}();