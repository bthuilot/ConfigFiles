cjModules.define(function(){"use strict";return function(e,t){function a(e){var t=cjBasics.urls.create(p+"search",{scope:"my",q:e,authuser:g.account.authuser});bmRuntime.openTab(t)}function i(){var e=cjMaterial.createElement("drawer",{color:"#4285f4"}),t=bmElements.createElement("servicelogo",{label:bmRuntime.i18n("cj_i18n_00112","Sites"),color:"color"});return e.appendChild(t),e.tabs=bmElements.createElement("drawertabs",{items:d,onChange:function(t){return d[t].page?(bmRuntime.changeToPage(d[t].page),void(e.tabs.selected=m)):(o.textContent="",s.textContent=d[t].label,d[t].init(),void(m=t))},selected:"my"}),e.appendChild(e.tabs),e}function n(e){var t=cjMaterial.createElement("item",{multiline:!0});t.addEventListener("click",function(){bmRuntime.openTab(e.url)});var a=cjMaterial.createElement("icon",{favicon:e.url});t.appendChild(a);var i=document.createElement("div");i.className="cj-md-item__body",t.appendChild(i);var n=document.createElement("div");n.className="cj-md-item__header",n.textContent=e.primaryText,i.appendChild(n);var r=document.createElement("div");if(r.className="cj-md-secondarytext",r.textContent=e.secondaryText,i.appendChild(r),e.tertiaryText){var l=document.createElement("div");l.className="cj-md-secondarytext",l.textContent=e.tertiaryText,i.appendChild(l)}return t}function r(){var t=cjBasics.urls.create(p+"dashboard/deleted",{mobile:"true",hl:"en",authuser:g.account.authuser});cjBasics.ajax(t).then(function(t){var a=cjBasics.replaceAll(t,"onclick","data-click"),i=document.createElement("div");if(a.indexOf('<ul id="deleted-sites-list-mobile">')!==-1){i.innerHTML=a.split('<ul id="deleted-sites-list-mobile">')[1].split("</ul>")[0];var r=i.children;if(r.length){for(var l=cjMaterial.createElement("list"),c=0;c<r.length;c++){var s=r[c],d=s.querySelector("a").dataset.click.split("'")[1].split("'")[0],u={url:"https://sites.google.com/site/"+d+"?authuser="+g.account.authuser,primaryText:s.querySelector(".deleted-sites-list-mobile-site-name").textContent,secondaryText:"Deleted by"+s.querySelector("div:nth-child(2)").textContent.split(":")[1]+" on"+s.querySelector("div:nth-child(3)").textContent.split(":")[1],tertiaryText:"/site/"+d},m=n(u);l.appendChild(m)}return o.appendChild(l),void bmRuntime.toggleLoading("off",e)}}var p=cjMaterial.createElement("emptystate",{color:"#4285f4",label:bmRuntime.i18n("cj_i18n_00055","No sites found"),iconName:"__mdi:cj_drive_sites"});o.appendChild(p),bmRuntime.toggleLoading("off",e)})}function l(){var t=cjBasics.urls.create(p+"dashboard",{mobile:"true",hl:"en",authuser:g.account.authuser});cjBasics.ajax(t).then(function(t){var a=document.createElement("div");if(t.indexOf("<ul>")!==-1){a.innerHTML=t.split("<ul>")[1].split("</ul>")[0];var i=a.children,r=location.href,l=r.substring(0,r.lastIndexOf("/")+1);if(0!==i.length&&i[0]&&i[0].querySelector(".your-site-title")){for(var c=cjMaterial.createElement("list"),s=0;s<i.length;s++){var d=i[s],u={url:"https://sites.google.com/"+d.querySelector(".your-site-title").href.replace(l,"")+"?authuser="+g.account.authuser,primaryText:d.querySelector(".your-site-title").textContent,secondaryText:d.querySelector(".sites-dash-site-url").textContent};d.querySelector(".wiki_summarized")&&(u.tertiaryText=d.querySelector(".wiki_summarized").textContent);var m=n(u);c.appendChild(m)}return o.appendChild(c),void bmRuntime.toggleLoading("off",e)}}var p=cjMaterial.createElement("emptystate",{color:"#4285f4",label:bmRuntime.i18n("cj_i18n_00055","No sites found")+".",subLabel:bmRuntime.i18n("cj_i18n_00114","To add a new site, click the add button"),iconName:"__mdi:cj_drive_sites"});o.appendChild(p),bmRuntime.toggleLoading("off",e)})}function c(){d={my:{label:bmRuntime.i18n("cj_i18n_00054","My Sites"),init:l,iconName:"__mdi:cj_drive_sites",newTabUrl:p+"dashboard?authuser="+g.account.authuser},trash:{label:bmRuntime.i18n("cj_i18n_00113","Deleted sites"),init:r,iconName:"__mdi:delete",newTabUrl:p+"dashboard/deleted?authuser="+g.account.authuser,divider:!0},atari:{label:bmRuntime.i18n("cj_i18n_00112","Sites"),iconName:"__mdi:cj_atari_drive",color:"#3f51b5",colorIcon:!0,newTabUrl:"https://sites.google.com/u/"+g.account.authuser+"/new",page:"atari"}},t.setOpenInNewHandler(function(){var e=d[m].newTabUrl;bmRuntime.openTab(e)}),bmRuntime.toggleLoading("on",e);var n=i(),c=bmElements.createElement("pageheader",{color:"#4285f4",pageId:"sites",searchboxProperties:{onSubmit:a,submitInNewTab:!0}});u(c.searchbox.focus);var h=cjMaterial.createElement("appbar",{color:"#4285f4",secondary:!0}),b=cjMaterial.createElement("iconbutton",{iconName:"__mdi:menu",onClick:function(){n.open()}});h.appendChild(b),s=cjMaterial.createElement("title",{label:bmRuntime.i18n("cj_i18n_00054","My Sites")}),h.appendChild(s),e.appendChild(h);var f=cjMaterial.createElement("fab",{label:bmRuntime.i18n("cj_i18n_00115","Create new site"),iconName:"__mdi:add",onClick:function(){bmRuntime.openTab(p+"dashboard/create-new-site?authuser="+g.account.authuser)}});e.appendChild(f),o=cjMaterial.createElement("container",{scrollable:!0,shadow:!0}),e.appendChild(c),e.appendChild(h),e.appendChild(o),e.appendChild(n),l()}var o,s,d,u=t.onPageDisplay,m="my",p="https://sites.google.com/site/sites/system/app/pages/meta/";c()}});