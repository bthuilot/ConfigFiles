cjModules.define(function(){"use strict";return function(e,t){function n(){c.then(function(){bmRuntime.portalOnSide&&!bmRuntime.servicePageData.translate.menuItem.classList.contains("selected")||i.sendMessage({method:"translateFocus"})})}function a(e){c.then(function(){"string"==typeof e&&e.length>0&&i.sendMessage({method:"translatePrefillText",value:e})})}var s=t.onPageDisplay;bmRuntime.toggleLoading("on",e),e.classList.add("cj-md-container--darker");var o=bmElements.createElement("pageheader",{light:!0,pageId:"translate",floating:"right"});e.appendChild(o);var r=cjBasics.urls.create("https://translate.google.com/m/translate",{bm_contentscript:"translate",bm_embed:"1",bm_toolbar_button_count:bmRuntime.getMainToolbarButtonCount(),authuser:g.account.authuser,hl:g.lang}),i=bmElements.createElement("iframe",{src:r,noLoading:!0});t.setOpenInNewHandler(function(){i.sendMessage({method:"translateOpenInNew"})});var c=new Promise(function(e){i.iframeElement.addEventListener("load",function(){e()})});c.then(function(){bmRuntime.toggleLoading("off",e)}),e.appendChild(i),s(n),n();var l=cjBasics.urls.getParameters();l.selection?a(l.selection):browser.tabs&&browser.tabs.executeScript&&browser.tabs.executeScript({code:"window.getSelection().toString();"}).then(function(e){a(e)})}});