!function(){"use strict";function e(e){var i=e.mimeType;if(i.startsWith("application/vnd.google-apps.")){if("application/vnd.google-apps.folder"===i)return{name:e.shared?"__mdi:folder_shared":"__mdi:folder",color:e.folderColorRgb};if("application/vnd.google-apps.document"===i)return u.document;if("application/vnd.google-apps.spreadsheet"===i)return u.spreadsheet;if("application/vnd.google-apps.presentation"===i)return u.presentation;if("application/vnd.google-apps.form"===i)return u.form;if("application/vnd.google-apps.drawing"===i)return u.drawing;if("application/vnd.google-apps.photo"===i)return u.image;if("application/vnd.google-apps.video"===i)return u.video;if("application/vnd.google-apps.audio"===i)return u.audio;if("application/vnd.google-apps.fusiontable"===i)return u.fusion;if("application/vnd.google-apps.map"===i)return u.map;if("application/vnd.google-apps.script"===i)return u.script;if("application/vnd.google-apps.site"===i||"application/vnd.google-apps.sites"===i)return u.sites;if("application/vnd.google-apps.file"===i||"application/vnd.google-apps.unknown"===i)return u.generic}if("application/vnd.google-analytics.rap.report"===i)return u.datareport;if("application/vnd.ms-excel"===i||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===i)return u.excel;if("application/msword"===i||"vnd.openxmlformats-officedocument.wordprocessingml.document"===i)return u.word;if("application/vnd.ms-powerpoint"===i||"application/vnd.openxmlformats-officedocument.presentationml.presentation"===i)return u.powerpoint;if("application/pdf"===i)return u.pdf;if("application/zip"===i)return u.archive;if("application/octet-stream"===i)return u.generic;if(i.startsWith("image/"))return u.image;if(i.startsWith("text/"))return u.text;if(i.startsWith("audio/"))return u.audio;if(i.startsWith("video/"))return u.video;var n=e.iconLink;return n.indexOf("googleusercontent.com/16/type/")!==-1&&(n=n.replace("/16/type/","/32/type/")),{url:n,size:18,color:"#fff"}}function i(i,n){var a=cjMaterial.createElement("griditem"),t="application/vnd.google-apps.folder"===i.mimeType,o=n.foldersOnTop&&t,r=e(i);if(!o){var l=document.createElement("div");if(l.className="cjg-doclist__griditem__thumbnail","__mdi:drive_image"===r.name&&l.classList.add("cjg-doclist__griditem__thumbnail--photo"),a.appendChild(l),i.hasThumbnail){var d=cjBasics.urls.create("https://drive.google.com/thumbnail",{authuser:g.account.authuser,id:i.id,v:p,sz:cjBasics.isRetina?"w288":"w144"});l.style.backgroundImage='url("'+d+'")'}else{var c=cjMaterial.createElement("icon",{size:96,color:"rgba(0, 0, 0, .15)",name:r.name});l.appendChild(c)}}if(n.hideLabels)a.classList.add("cjg-doclist__griditem--nolabels");else{var m=document.createElement("div");m.className="cj-md-grid__item__bottom cjg-doclist__griditem__bottom",a.appendChild(m);var s=cjMaterial.createElement("icon",r);m.appendChild(s);var u=document.createElement("div");u.className="cj-md-grid__item__textcontainer",m.appendChild(u);var _=document.createElement("div");if(_.textContent=i.name||"File",u.appendChild(_),i.name.length>20&&(_.name=i.name),o){var f=cjMaterial.createElement("iconbutton",{iconName:"__mdi:open_in_new",label:bmRuntime.i18n("cj_i18n_00123","Open folder in new tab"),onClick:function(e){var n=i.webViewLink;cjBasics.urls.insertParameter(n,"authuser",g.account.authuser),bmRuntime.openTab(n),e.stopPropagation()}});f.classList.add("cjg-doclist__show-on-hover"),m.appendChild(f)}}return a}function n(e){var i=e.split("T")[0].split("-"),n=[parseFloat(i[0]),parseFloat(i[1])-1,parseFloat(i[2])];return cjBasics.datetime.printLegacyDate(n)}function a(i){var a="application/vnd.google-apps.folder"===i.mimeType,t=cjMaterial.createElement("item"),o=e(i),r=cjMaterial.createElement("icon",{withShell:!0,name:o.name,url:o.url,size:o.size,color:o.color});t.appendChild(r);var l=document.createElement("div");l.className="cj-md-item__body";var d=document.createElement("div");if(d.className="cj-md-item__header",d.textContent=i.name,l.appendChild(d),i.shared&&!a){var c=cjMaterial.createElement("icon",{name:"__mdi:people",size:20});c.className="cjg-doclist__listitem__shared",d.appendChild(c)}if(i.modifiedTime){var p=document.createElement("div"),m=n(i.modifiedTime);p.className="cj-md-secondarytext",p.textContent=" "+bmRuntime.i18n("cj_i18n_00006","modified")+": "+m,l.appendChild(p)}if(t.appendChild(l),a){var s=cjMaterial.createElement("iconbutton",{iconName:"__mdi:open_in_new",label:bmRuntime.i18n("cj_i18n_00123","Open folder in new tab"),onClick:function(e){var n=i.webViewLink;cjBasics.urls.insertParameter(n,"authuser",g.account.authuser),bmRuntime.openTab(n),e.stopPropagation()}});s.classList.add("cjg-doclist__show-on-hover"),t.appendChild(s)}return t}function t(e){if(e.searching)return bmRuntime.i18n("cj_i18n_00116","Try a synonym or more general keyword");var i=bmRuntime.i18n("cj_i18n_00117","You can add new"),n=bmRuntime.i18n("cj_i18n_00118","using the button below");return i+" "+e.entityName+" "+n}function o(e){var i=bmRuntime.i18n("cj_i18n_00119","No"),n=bmRuntime.i18n("cj_i18n_00120","found");return i+" "+e.entityName+" "+n}function r(e){return cjMaterial.createElement("emptystate",{label:o(e),subLabel:t(e),iconName:e.emptyStateIcon,color:e.primaryColor})}function l(e){var i=cjBasics.urls.create("https://www.googleapis.com/drive/v3/files",{prettyPrint:!1,pageToken:e.pageToken,pageSize:e.pageSize,spaces:e.spaces,q:e.q,orderBy:e.orderBy,fields:"files(id,webViewLink,iconLink,name,mimeType,modifiedTime,shared,thumbnailLink,folderColorRgb),nextPageToken"});return g.request(i,{fetchAs:"json"},{scope:e.apiScopes}).then(function(e){return{nextPageToken:e.nextPageToken,files:e.files.map(function(e){return e.hasThumbnail="thumbnailLink"in e,delete e.thumbnailLink,e})}})}function d(e,n){var t;return t=n.listview?a(e):i(e,n),t.addEventListener("click",function(){n.onFileClick(e)}),t}function c(e){function i(e){for(var i=0;i<e.length;i++){var n=e[i];o&&!C&&"application/vnd.google-apps.folder"!==n.mimeType&&(C=!0,_.appendChild(v),_.appendChild(b));var a=d(n,t);o&&!C?j.appendChild(a):w.appendChild(a)}h.appendChild(j),b.appendChild(w)}function n(e){if(_.textContent="",C=!1,0===e.length){var n=r(t);_.appendChild(n)}else{h.textContent="",b.textContent="";var a="application/vnd.google-apps.folder"===e[0].mimeType;o&&a?(_.appendChild(f),_.appendChild(h)):(C=!0,_.appendChild(b)),_.appendChild(b),i(e)}}function a(){return bmRuntime.toggleLoading("on",_),l(u).then(function(e){if(e.nextPageToken&&(u.pageToken=e.nextPageToken,_.setInfiniteScroll(a)),y){y=!1;var o=JSON.stringify(e.files);if(o===k)return void bmRuntime.toggleLoading("off",_);g.cache.setItem(t.cachingId,o),n(e.files)}else i(e.files);bmRuntime.toggleLoading("off",_)})}var t={listview:e.listview,onFileClick:e.onFileClick,entityName:e.entityName||bmRuntime.i18n("cj_i18n_00144","files"),emptyStateIcon:e.emptyStateIcon||"__mdi:drive_file",primaryColor:e.primaryColor||"#4285f4",searching:e.searching||!1,cachingId:e.cachingId||null,hideLabels:e.hideLabels,foldersOnTop:e.orderBy&&e.orderBy.indexOf("folder")!==-1},o=t.foldersOnTop,c=Math.round(document.documentElement.offsetHeight*document.documentElement.offsetWidth/7500);c<50&&(c=50);var p=[];e.spaces&&e.spaces.indexOf("photos")===-1||p.push(s),e.spaces&&e.spaces.indexOf("drive")===-1||p.push(m);var u={spaces:e.spaces||"drive,photos",orderBy:e.orderBy,q:e.q,pageSize:c,apiScopes:p},_=cjMaterial.createElement("container",{scrollable:!0,infiniteScroll:!0,loading:!0,darker:!t.listview}),f=cjMaterial.createElement("subheader",{label:bmRuntime.i18n("cj_i18n_00121","Folders"),color:e.subHeaderColor}),v=cjMaterial.createElement("subheader",{label:bmRuntime.i18n("cj_i18n_00122","Files"),color:e.subHeaderColor}),h=cjMaterial.createElement(t.listview?"list":"gridcontainer"),b=cjMaterial.createElement(t.listview?"list":"gridcontainer"),w=document.createDocumentFragment(),j=document.createDocumentFragment(),C=!1,y=!0,k=null;return t.cachingId&&g.cache.getItem(t.cachingId).then(function(e){if(y!==!1&&e){var i=JSON.parse(e);Array.isArray(i)&&(n(i),k=e)}}),a(),_}var p=Date.now().toString(),m="https://www.googleapis.com/auth/drive",s="https://www.googleapis.com/auth/drive.photos.readonly",u={archive:{name:"__mdi:drive_archive",color:"rgba(0, 0, 0, .3)"},audio:{name:"__mdi:drive_audio",color:"#ea4335"},datareport:{name:"__mdi:cj_drive_datastudio",color:"#3367d6"},chart:{name:"__mdi:drive_chart",color:"#34a853"},document:{name:"__mdi:drive_document",color:"#4285f4"},drawing:{name:"__mdi:drive_drawing",color:"#ea4335"},earth:{name:"__mdi:earth",color:"#4285f4"},excel:{name:"__mdi:drive_ms_excel",color:"#34a853"},form:{name:"__mdi:drive_form",color:"#673ab7"},fusion:{name:"__mdi:drive_fusiontable",color:"#34a853"},generic:{name:"__mdi:drive_file",color:"#4285f4"},image:{name:"__mdi:drive_image",color:"#ea4335"},keep:{name:"__mdi:drive_keep",color:"#FFCD40"},map:{name:"__mdi:place",color:"#ea4335"},pdf:{name:"__mdi:drive_pdf",color:"#FE4A22"},powerpoint:{name:"__mdi:drive_ms_powerpoint",color:"#FF752A"},presentation:{name:"__mdi:drive_presentation",color:"#FFCD40"},script:{name:"__mdi:drive_script",color:"#4285f4"},sites:{name:"__mdi:cj_atari_drive",color:"#3E50B4"},spreadsheet:{name:"__mdi:drive_spreadsheet",color:"#34a853"},text:{name:"__mdi:drive_text",color:"#4285f4"},video:{name:"__mdi:drive_video",color:"#ea4335"},word:{name:"__mdi:drive_ms_word",color:"#4583EA"},zip:{name:"__mdi:drive_zip",color:"rgba(0, 0, 0, .3)"},upload:{name:"__mdi:file_upload",color:"#b3b3b3"}};Object.defineProperty(window,"cjgDoclist",{value:{create:c}})}();