var validTabIds;!function(){"use strict";function e(e){return validTabIds.indexOf(e)!==-1}var r=browser.runtime.getURL("").startsWith("moz-extension://"),s=browser.runtime.getURL("app.html");validTabIds=[-1],browser.runtime.onMessage.addListener(function(e,r){if(r.url.startsWith(s)){var t=r.tab.id;if(e.addAllowedTabId)return void validTabIds.push(t);if(e.removeAllowedTabId){var n=validTabIds.indexOf(t);n!==-1&&validTabIds.splice(n,1)}}}),browser.webRequest.onHeadersReceived.addListener(function(r){if(!e(r.tabId))return null;var s=r.responseHeaders.filter(function(e){return"x-frame-options"!==e.name.toLowerCase()});return{responseHeaders:s}},{urls:["https://*.google.com/*bm_embed=1*"],types:["sub_frame"]},["blocking","responseHeaders"]),r&&browser.webRequest.onHeadersReceived.addListener(function(r){if(!e(r.tabId))return null;var s=r.responseHeaders.filter(function(e){return"content-security-policy"!==e.name.toLowerCase()});return{responseHeaders:s}},{urls:["https://*.google.com/*bm_wiz=1*"],types:["sub_frame"]},["blocking","responseHeaders"]),browser.webRequest.onBeforeSendHeaders.addListener(function(r){if(!e(r.tabId))return null;for(var s=r.requestHeaders,t=s.length-1;t>=0;--t){var n=s[t].name.toLowerCase();"user-agent"===n&&(s[t].value="Mozilla/5.0 (Linux; Android 5.1.1; Nexus 6 Build/LYZ28E) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/44.0.2403.20 Mobile Safari/537.36")}return{requestHeaders:s}},{urls:["https://*.google.com/*bm_mobile=1*"],types:["sub_frame"]},["blocking","requestHeaders"]),browser.webRequest.onHeadersReceived.addListener(function(r){if(!e(r.tabId))return null;var s=r.responseHeaders;return s.push({name:"Access-Control-Allow-Origin",value:"*"}),{responseHeaders:s}},{urls:["https://translate.google.com/translate_a/single*"],types:["xmlhttprequest"]},["blocking","responseHeaders"]),browser.webRequest.onBeforeSendHeaders.addListener(function(r){if(!e(r.tabId))return null;var s=r.requestHeaders.filter(function(e){return"origin"!==e.name.toLowerCase()});return s.push({name:"Origin",value:"https://www.google.com"}),{requestHeaders:s}},{urls:["https://*.google.com/*cjg_ogs=1*"],types:["xmlhttprequest"]},["blocking","requestHeaders"])}();